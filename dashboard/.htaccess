RewriteEngine On

# If the request is for a file that exists, serve it
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# If the request is for a directory that exists, serve it
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# If the request is not for a file/directory and doesn't have .php extension
# Check if adding .php would result in an existing file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^.]+)$ $1.php [L]